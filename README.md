# `> whois me`

* https://github.com/phated
* https://github.com/phated/grunt-jade
* https://github.com/phated/grunt-dojo
* https://github.com/phated/grunt-enyo
* https://github.com/phated/volo-grunt
* http://www.iceddev.com/
* http://frozenjs.com/
* http://hackphx.com/
* http://www.flickr.com/photos/hslphotosync/8531823173/in/set-72157632923003801/
* http://www.heatsynclabs.org/

# Grunt

* Task Runner written in JavaScript, configured with JavaScript, tasks (plugins) written in JavaScript
	![JS All The Way Down](http://lunar.lostgarden.com/gfx/TurtlesAllTheWayDown-small.jpg)
* But Wait
	> # This task requires you to have Ruby and Sass installed.

	https://github.com/gruntjs/grunt-contrib-sass#sass-task
* Keep the dream alive! https://github.com/sindresorhus/grunt-sass

# Requirements

* Node.js - http://nodejs.org/
* NPM - https://npmjs.org/
* Get them into your stack!

# But Why?

![WHY?](http://i18.fastpic.ru/big/2011/0808/66/889d926b39b762816ac6daee50c7de66.jpg)

* Insanity: https://github.com/phated/dcc2013grunt/blob/master/insanity.md
* Programmers Insanity: https://github.com/phated/dcc2013grunt/blob/master/programmers-insanity.md

# Grunt > Others

* Maven & Ant
	* https://github.com/phated/dcc2013grunt/blob/master/examples/maven.xml
	* https://github.com/phated/dcc2013grunt/blob/master/examples/ant.xml
	![Just Say No](http://sealgreen.files.wordpress.com/2012/07/just-say-no.jpg)
* Rake
	* https://github.com/wycats/handlebars.js/blob/master/Rakefile
	* **115 Lines!?!?!** to run 2 tests suites, a benchmark and compilation
	* Good for ruby projects, but do JavaScript in JavaScript
	* Extra technologies FTL
* Make
	* https://github.com/twitter/bootstrap/blob/master/Makefile
	* Slightly better
	* Not cross-platform (well - kinda, http://gnuwin32.sourceforge.net/packages/make.htm :/ )
	* Not modular
	* Released in 1977 - can't we do better?
* Other JS runners?
	* Cakefile (Coffeescript) - http://jashkenas.github.io/coffee-script/documentation/docs/cake.html
	* Volofile - https://github.com/volojs/volo/wiki/Creating-a-volofile
	* Jakefile - https://github.com/mde/jake
	* Anything in JS or CS is better than Maven/Ant/Rake/Make for JavaScript projects
* Grunt's **community** is large - popularity = less code for you to write
	* 685 gruntplugins
	* Grunt-contrib: https://github.com/gruntjs

# Installation

* `npm install -g grunt-cli`
	* Global install
	* Very minimal package
	* Gives you `grunt` command
	* Just bootstraps the local grunt
	* Cool bash autocompletion - add `eval "$(grunt --completion=bash)"` to your ~/.bashrc
* `npm install --save-dev grunt`
	* Local install
	* Saves to devDependencies
	* Used by grunt-cli to run grunt
	* Allows for any version to be used (which was a problem with grunt 0.3)
* `npm install --save-dev grunt-jade`
	* Installs a plugin alongside grunt
	* Allows your gruntfile to import the plugin
	* Again, saves to devDependencies to install again later

# Basic Configuration

```javascript
module.exports = function(grunt) {
	grunt.initConfig({

	});
};
```

**Going to skip the `module.exports` wrapper below**

### Let's add a task

```javascript
grunt.initConfig({
	concat: {
		dist: {
			files: {
				'dist/oneFile.js': ['src/firstFile.js', 'src/secondFile.js']
			}
		}
	}
});

grunt.loadNpmTasks('grunt-contrib-concat'); // grunt.loadTasks('some-local-task');
```

**Going to skip `grunt.loadNpmTasks('grunt-contrib-concat');` below**

### Options (per task for all target or per single target)

```javascript
grunt.initConfig({
	concat: {
		dist: {
			files: {
				'dist/oneFile.js': ['src/firstFile.js', 'src/secondFile.js']
			},
			options: {
				stripBanners: true
			}
		},
		options: {
			banner: '/* This file generated by Grunt! */'
		}
	}
});
```

### Globbing (via [node-glob](https://github.com/isaacs/node-glob) and [minimatch](https://github.com/isaacs/minimatch))

```javascript
grunt.initConfig({
	concat: {
		dist: {
			files: {
				'dist/oneFile.js': ['src/**/*.js', '!src/exludedFile.js']
			},
			options: {
				stripBanners: true
			}
		},
		options: {
			banner: '/* This file generated by Grunt! */'
		}
	}
});
```

# Slightly more advanced config

### Templates

```javascript
grunt.initConfig({
	src: 'source',
	dest: 'dist',
	concat: {
		dist: {
			files: {
				'<%= dest %>/oneFile.js': ['<%= src %>/**/*.js', '!<%= src %>/exludedFile.js']
			},
			options: {
				stripBanners: true
			}
		},
		options: {
			banner: '/* This file generated by Grunt! on <%= grunt.template.today("yyyy-mm-dd") %> */'
		}
	}
});
```

### Pulling data in from JSON or YAML

```javascript
grunt.initConfig({
	src: 'source',
	dest: 'dist',
	pkg: grunt.file.readJSON('package.json'),
	yml: grunt.file.readYAML('.travis.yml'),
	concat: {
		dist: {
			files: {
				'<%= dest %>/oneFile.js': ['<%= src %>/**/*.js', '!<%= src %>/exludedFile.js']
			},
			options: {
				stripBanners: true
			}
		},
		options: {
			banner: '/* This file generated by Grunt! on <%= grunt.template.today("yyyy-mm-dd") %>' +
					'Version <%= pkg.version %> - Tested on Node <%= yml[yml.language].join(',') %> */'
		}
	}
});
```

### Aliases

```javascript
grunt.registerTask('dist', ['jshint', 'qunit', 'concat', 'uglify']);
```

### Renaming

```javascript
grunt.renameTask('jshint', 'lint');
```

# Make Your Own Tasks

### Basic

```javascript
grunt.registerTask('dcc', 'Awesome Task for DCC', function(){
	grunt.log.writeln(Math.PI);
});
```

### Multi

```javascript
grunt.registerMultiTask('dcc', 'Awesome Multi Task for DCC', function(){
	grunt.log.writeln(this.files);
});
```

### Inside

* `this.async`
	* Used for async operations
* `this.requires`
	* Ensures certain tasks have been run and succeeded before executing your task
* `this.requiresConfig`
	* Ensures certain properties exist in config before executing your task
* `this.name`
	* Reference the name of the task
* `this.nameArgs`
	* Reference the command used to execute task on command line
* `this.args`
	* Array of arguments passed to task (without current target in multi tasks)
* `this.flags`
	* Object of arguments passed to task (without current target in multi tasks)
* `this.errorCount`
	* Number of times grunt.log.error was called
* `this.options`
	* Function that mixes defaults into options passed in
* `this.target`
	* The target being executed
* `this.files`
	* Array of normalized files
* `this.filesSrc`
	* Array of normalized `src` filenames
* `this.data`
	* Data associated with the current target

# APIs

### [grunt](http://gruntjs.com/api/grunt)

* ~~`grunt.initConfig()`~~
* ~~`grunt.registerTask()`~~
* ~~`grunt.registerMultiTask()`~~
* ~~`grunt.renameTask()`~~
* ~~`grunt.loadTasks()`~~
* ~~`grunt.loadNpmTasks()`~~
* `grunt.option(optionName)`
* `grunt.package`
* `grunt.version`

### [grunt.config](http://gruntjs.com/api/grunt.config)

* ~~`grunt.config.init(configObject)`~~
* `grunt.config([prop [, value]])`
* `grunt.config.get([prop])`
* `grunt.config.set(prop, value)`
* `grunt.config.process(value)`
* `grunt.config.getRaw([prop])`
* `grunt.config.escape(propString)`
* ~~`grunt.config.requires(prop [, prop [, ...]])`~~

### [grunt.event](http://gruntjs.com/api/grunt.event) (entire EventEmitter2 API)

* `grunt.event.on(event, listener)`
* `grunt.event.off(event, listener)`
* `grunt.event.emit(event, [arg1], [arg2], [...])`
* `grunt.event.once(event, listener)`
* `grunt.event.many(event, timesToListen, listener)`
* `grunt.event.removeAllListeners([event])`

Grunt doesn't emit events

### [grunt.fail](http://gruntjs.com/api/grunt.fail)

* `grunt.fail.warn(error [, errorcode])` (`grunt.warn`)
* `grunt.fail.fatal(error [, errorcode])` (`grunt.fatal`)

### [grunt.file](http://gruntjs.com/api/grunt.file)

* `grunt.file.defaultEncoding = 'utf8'`

* #### [Read/Write](http://gruntjs.com/api/grunt.file#reading-and-writing)

* `grunt.file.read(filepath [, options])`
* ~~`grunt.file.readJSON(filepath [, options])`~~
* ~~`grunt.file.readYAML(filepath [, options])`~~
* `grunt.file.write(filepath, contents [, options])`
* `grunt.file.copy(srcpath, destpath [, options])`
* `grunt.file.delete(filepath [, options])`

* #### [Directories](http://gruntjs.com/api/grunt.file#directories)

* `grunt.file.mkdir(dirpath [, mode])`
* `grunt.file.recurse(rootdir, callback)`

* #### [Globbing](http://gruntjs.com/api/grunt.file#globbing-patterns)

* `grunt.file.expand([options, ] patterns)`
* `grunt.file.expandMapping(patterns, dest [, options])`
* `grunt.file.match([options, ] patterns, filepaths)`
* `grunt.file.isMatch([options, ] patterns, filepaths)`

* #### [File Types](http://gruntjs.com/api/grunt.file#file-types)

* `grunt.file.exists(path1 [, path2 [, ...]])`
* `grunt.file.isLink(path1 [, path2 [, ...]])`
* `grunt.file.isDir(path1 [, path2 [, ...]])`
* `grunt.file.isFile(path1 [, path2 [, ...]])`

* #### [Paths](http://gruntjs.com/api/grunt.file#paths)

* `grunt.file.isPathAbsolute(path1 [, path2 [, ...]])`
* `grunt.file.arePathsEquivalent(path1 [, path2 [, ...]])`
* `grunt.file.doesPathContain(ancestorPath, descendantPath1 [, descendantPath2 [, ...]])`
* `grunt.file.isPathCwd(path1 [, path2 [, ...]])`
* `grunt.file.isPathInCwd(path1 [, path2 [, ...]])`
* `grunt.file.setBase(path1 [, path2 [, ...]])`

* #### [External](http://gruntjs.com/api/grunt.file#external-libraries)

* `grunt.file.glob`
* `grunt.file.minimatch`
* `grunt.file.findup`

### [grunt.log](http://gruntjs.com/api/grunt.log)

* `grunt.log.write(msg)`
* `grunt.log.writeln([msg])`
* `grunt.log.error([msg])`
* `grunt.log.errorlns(msg)`
* `grunt.log.ok([msg])`
* `grunt.log.oklns(msg)`
* `grunt.log.subhead(msg)`
* `grunt.log.writeflags(obj, prefix)`
* `grunt.log.debug(msg)`
* `grunt.log.wordlist(arr [, options])`
* `grunt.log.uncolor(str)`
* `grunt.log.wraptext(width, text)`
* `grunt.log.table(widths, texts)`

All methods are available on `grunt.verbose`/`grunt.verbose.or` and `grunt.log.verbose`/`grunt.log.notverbose`

The `--verbose` flag causes these to print or not print

### [grunt.option](http://gruntjs.com/api/grunt.option)

* ~~`grunt.option(key[, val])`~~
* `grunt.option.init([initObject])`
* `grunt.option.flags()`

### [grunt.task](http://gruntjs.com/api/grunt.task)

* ~~`grunt.task.registerTask(taskName, [, description], taskListOrFunction)`~~
* ~~`grunt.task.registerMultiTask(taskName, description, taskFunction)`~~
* ~~`grunt.task.renameTask(oldname, newname)`~~
* ~~`grunt.task.loadTasks(tasksPath)`~~
* ~~`grunt.task.loadNpmTasks(pluginName)`~~
* `grunt.task.run(taskList)`
* `grunt.task.clearQueue()`
* `grunt.task.normalizeMultiTaskFiles(data [, targetname])`

### [grunt.template](http://gruntjs.com/api/grunt.template)

* `grunt.template.process(template [, options])`
* `grunt.template.setDelimiters(name)`
* `grunt.template.addDelimiters(name, opener, closer)`
* `grunt.template.date(date, format)`
* `grunt.template.today(format)`

### [grunt.util](http://gruntjs.com/api/grunt.util)

* `grunt.util.kindOf(value)`
* `grunt.util.error(message [, origError])`
* `grunt.util.linefeed`
* `grunt.util.normalizelf(string)`
* `grunt.util.recurse(object, callbackFunction, continueFunction)`
* `grunt.util.repeat(n, str)`
* `grunt.util.pluralize(n, str, separator)`
* `grunt.util.spawn(options, doneFunction)`
* `grunt.util.toArray(arrayLikeObject)`
* `grunt.util.callbackify(syncOrAsyncFunction)`
* `grunt.util.namespace`
* `grunt.util.task`
* `grunt.util._`
* `grunt.util.async`
* `grunt.util.hooker`

# Grunt-init

* Split into it's own module
* Pain to install, update and use
* Install it globally with `npm install -g grunt-init`
* Git clone init templates into `~/.grunt-init/`
* Supposedly going to be superseded by Yeoman's `yo` generator tool - http://yeoman.io/

# Differences between 0.3 and 0.4

* No more built-in tasks - http://gruntjs.com/upgrading-from-0.3-to-0.4#core-tasks-are-now-grunt-plugins